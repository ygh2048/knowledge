# UART

## 什么是 UART？
**UART**（Universal Asynchronous Receiver/Transmitter，通用异步收发器）是一种常见的串行通信协议，用于设备间的异步串行数据传输。它通过**两根信号线**（TX 和 RX）实现全双工通信。
![alt text](image-11.png)
## 数据帧结构
UART 数据以**帧（Frame）**为单位传输，每帧包含以下部分：

| 组成部分       | 描述                                                                 |
|----------------|----------------------------------------------------------------------|
| **起始位**     | 1 位低电平，标志数据帧的开始                                         |
| **数据位**     | 5-9 位（通常为 8 位），实际传输的数据                                |
| **校验位**     | 可选 1 位（奇校验/偶校验/无校验），用于错误检测                       |
| **停止位**     | 1、1.5 或 2 位高电平，标志数据帧的结束                               |

示例帧：`[起始位][数据位 D0-D7][奇校验][停止位]`

## 工作原理
### 异步通信
- 无需时钟信号同步，依靠**预定义波特率（Baud Rate）**匹配收发时序。
- 波特率 = 每秒传输的符号数（如 9600 Baud ≈ 9600 符号/秒）。

### 数据流示例
```plaintext
发送端 TX: 起始位 → 数据位 LSB 到 MSB → 校验位 → 停止位
接收端 RX: 检测起始位 → 采样数据位 → 验证校验位 → 确认停止位
```

## 硬件接口
- **物理层标准**：RS-232、RS-422、RS-485（电平与传输距离不同）
- **典型接口芯片**：MAX232（TTL ↔ RS-232 电平转换）
- **连接方式**：
  - 直连：设备 A 的 TX → 设备 B 的 RX
  - 交叉连接：设备 A 的 TX → 设备 B 的 RX，GND 相连

## 关键配置参数
| 参数         | 可选值                          | 说明                     |
|--------------|--------------------------------|--------------------------|
| 波特率       | 9600, 19200, 115200 等         | 通信速率需双方一致       |
| 数据位       | 5, 6, 7, 8, 9                  | 常用 8 位                |
| 校验位       | None（无）、Even（偶）、Odd（奇）| 错误检测机制             |
| 停止位       | 1, 1.5, 2                      | 常用 1 位               |


波特率：数据传输速率以波特率表示，即每秒传输的位数。例如，如果数据传输速率为120个字符/秒，每个字符为10位（1个起始位、7个数据位、1个校验位、1个停止位），则其传输的波特率为10×120 = 1200 个字符/秒 = 1200 波特率。 
    
## 典型应用场景
- **嵌入式系统**：MCU 与传感器/模块通信（如 GPS、蓝牙）
- **工业控制**：PLC 与 HMI 设备交互
- **调试与日志**：通过串口输出调试信息
- **老式设备**：调制解调器、POS 机等  

## 优缺点对比
| **优点**                     | **缺点**                     |
|------------------------------|------------------------------|
| 简单易实现，成本低           | 传输速率较低（通常 ≤ 115200）|
| 支持全双工通信               | 通信距离短（一般 < 15 米）   |
| 无需时钟线，节省硬件资源     | 无硬件流控（需软件实现）      |

## 注意事项
1. **波特率匹配**：收发双方必须使用相同的波特率。
2. **电平兼容性**：不同标准（如 TTL 与 RS-232）需电平转换芯片。
3. **抗干扰能力**：长距离通信建议使用 RS-485 或增加屏蔽措施。
4. **错误检测**：校验位可检测单比特错误，但无法纠正。

